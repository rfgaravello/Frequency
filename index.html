
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Binaural & 963Hz Generator</title>
  <style>
    body { background: #111; color: #eee; text-align: center; font-family: sans-serif; margin-top: 5em; }
    button, select { padding: 1em 2em; font-size: 1.2em; margin: 1em; cursor: pointer; }
    select { background-color: #222; color: #eee; border: none; }
  </style>
</head>
<body>
  <h1>Frequency Generator</h1>
  <button onclick="startTone()">Play 963Hz</button>
  <button onclick="stopTone()">Stop</button>
  <br><br>

  <h2>Binaural Beat Generator</h2>
  <label for="binauralSelect">Choose Binaural Frequency:</label>
  <select id="binauralSelect">
    <option value="4">Theta (4Hz)</option>
    <option value="7">Theta High (7Hz)</option>
    <option value="10">Alpha (10Hz)</option>
    <option value="14">Beta (14Hz)</option>
    <option value="30">Gamma (30Hz)</option>
  </select>
  <br>
  <button onclick="startBinaural()">Play Binaural</button>
  <button onclick="stopBinaural()">Stop Binaural</button>

  <script>
    let context;
    let oscillator, leftOsc, rightOsc, merger;

    function startTone() {
      stopTone(); // Stop if already playing
      context = new (window.AudioContext || window.webkitAudioContext)();
      oscillator = context.createOscillator();
      oscillator.type = 'sine';
      oscillator.frequency.setValueAtTime(963, context.currentTime);
      oscillator.connect(context.destination);
      oscillator.start();
    }

    function stopTone() {
      if (oscillator) {
        oscillator.stop();
        oscillator.disconnect();
        context.close();
        oscillator = null;
      }
    }

    function startBinaural() {
      stopBinaural(); // Stop if already playing
      context = new (window.AudioContext || window.webkitAudioContext)();
      const baseFreq = 210;
      const beatFreq = parseFloat(document.getElementById("binauralSelect").value);
      leftOsc = context.createOscillator();
      rightOsc = context.createOscillator();
      merger = context.createChannelMerger(2);

      leftOsc.frequency.setValueAtTime(baseFreq, context.currentTime);
      rightOsc.frequency.setValueAtTime(baseFreq + beatFreq, context.currentTime);
      leftOsc.type = rightOsc.type = 'sine';

      leftOsc.connect(merger, 0, 0);  // Left
      rightOsc.connect(merger, 0, 1); // Right
      merger.connect(context.destination);

      leftOsc.start();
      rightOsc.start();
    }

    function stopBinaural() {
      if (leftOsc && rightOsc && context) {
        leftOsc.stop();
        rightOsc.stop();
        leftOsc.disconnect();
        rightOsc.disconnect();
        merger.disconnect();
        context.close();
        leftOsc = rightOsc = merger = null;
      }
    }
  </script>
</body>
</html>
